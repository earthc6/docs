---
sidebar_position: 2
---

# IDL

This page contains the IDL for the NFT and Society canisters.

### Society Canister

- `addLedger`: adds the NFT to the society (add permission)
- `addPost`: share a post, returns the Post identifier UUID
- `createSociety`: create a new society and returns the identifier
- `createTag`: create a new tag
- `getAllPost`: get all posts as a collection
- `getAllSociety`: get all societies as a collection
- `getAllTags`: get all tags
- `getAllTagsDao`: get a colleciton of tuples of tags and array of Dao IDs
- `getLedgerByAccountID`: get NFT and collections for the provided wallet address
- `getLogs`: get debug logs
- `getPostByID`: get post entry by the UUID
- `getPostBySociety`: get all posts in the society
- `getSociety`: get society entry by the UUID
- `getSocietyByTag`: get societies that are in a tag
- `getTag`: return the tag entry
- `removeLedger`: remove the NFT from the society canister (remove permission)

### NFT Canister

- `NFTTransfer`: transfers the NFT (must be called by the NFT canister)
- `availableICP`: get the avaliable ICP in the canister wallet
- `balance`: returns `1` if the caller owns the specific token, `0` otherwise
- `getAllListings`: get all the listings
- `getAllowances`: get a collection of allowances
- `getCanisterAddress`: get the wallet address of this canister
- `getListingByTokenID`: get a listing for the provided token id
- `getLogs`: get a collection of debug logs
- `getMinter`: get the minter principal id
- `setMinter`: sets the minter principal
- `getRegistry`: get a collection of tuples of the NFT and token holders
- `getStats`: get NFT stats (# of NFT minted, # of NFT sold, average price)
- `getTokens`: get a collection of the NFTs and metadata
- `getTransactions`: get a collection of the transaction ledger for all NFTs in this canister
- `getTxnsByTokenID`: get a collection of the transaction history for the given NFT
- `list`: list a token for sale
- `listings`: get a collection of NFT for sale
- `metadata`: returns NFT metadata of the token at the given token index
- `mintNFT`: mint new NFTs
- `settle`: validates the transaction with the given block height, transfers the NFT (purchase callback), and notifies the society canisters with the new NFT holder

### Proxy Block


- `block`: given a block height, validates the transaction and returns the block info data (including memo and transaction data)
- `tip_of_chain`: returns the latest block height of the block chain

## Examples

The below examples will require you to install and use the [Dfinity SDK](https://sdk.dfinity.org/docs/developers-guide/install-upgrade-remove.html). Please ensure that you have it installed as you will need `dfx` to run the commands below.

### Society

Creating a new Tag:
```
dfx canister call society createTag '(record {icon="/frontend/assets/Tags/all.png"; name="All"})'
```

The above creates a new tag called "All" with the icon URL.

Creating a new Society:

```
dfx canister call society createSociety 'record {name="Graffiti"; tag="Art"; background="/frontend/assets/Society/background/img_2.png"; icon="/frontend/assets/Society/icon/img_1.png"; description="Graffiti and street art"}'
```

The above creates a new society called "Graffiti" and associates it to the tag "Art". The method returns a UUID which is necessary for sharing posts, videos and images.

Sharing a Text Post:

```
dfx canister call society addPost '("Graffiti", record {ID="3"; post=variant {text=record {body="Now this is art"}}; author=record {coreUser=variant {address="bbefd96fef9f11b044cae5c4b797fd4f910eddbe8416b17ecee286f25531d6ff"}; name="EarthC6"; avatar="https://static.wikia.nocookie.net/dragonball/images/0/0d/DendeIllFightToo.png/revision/latest/scale-to-width-down/350?cb=20110906232642"}})'
```

The above shares a post to the "Graffiti" society.

### NFT

Minting a NFT:
```
dfx canister call nft mintNFT 'record {to=variant {address="bbefd96fef9f11b044cae5c4b797fd4f910eddbe8416b17ecee286f25531d6ff"}; metadata=null; collections=opt vec{"Admin Graffiti"}}'
```

The above creates a new NFT for the wallet address `bbefd96fef9f11b044cae5c4b797fd4f910eddbe8416b17ecee286f25531d6ff` and adds it to `Admin Graffiti` collection.
